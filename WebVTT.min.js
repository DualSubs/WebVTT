// minify: https://www.digitalocean.com/community/tools/minify
function WebVTT(e,t){return new class{constructor(e,t){this.name=e,Object.assign(this,t)}parse(e=new String,t=["timeStamp"]){const n=t.includes("ms")?/^(?:(?<srtNum>\d+)[(\r\n)\r\n])?(?<timeLine>(?<startTime>(?:\d\d:)?\d\d:\d\d(?:\.|,)\d\d\d) --> (?<endTime>(?:\d\d:)?\d\d:\d\d(?:\.|,)\d\d\d)) ?(?<options>.+)?[^](?<text>.*[^]*)$/:/^(?:(?<srtNum>\d+)[(\r\n)\r\n])?(?<timeLine>(?<startTime>(?:\d\d:)?\d\d:\d\d)(?:\.|,)\d\d\d --> (?<endTime>(?:\d\d:)?\d\d:\d\d)(?:\.|,)\d\d\d) ?(?<options>.+)?[^](?<text>.*[^]*)$/;let d={headers:e.match(/^(?<fileType>WEBVTT)?[^](?<Xoptions>.+[^])*/)?.groups??null,CSS:e.match(/^(?<Style>STYLE)[^](?<Boxes>.*::cue.*(\(.*\))?((\n|.)*}$)?)/m)?.groups??null,body:e.split(/[(\r\n)\r\n]{2,}/).map((e=>e.match(n)?.groups??""))};return d.body=d.body.filter(Boolean),d.body=d.body.map(((e,n)=>{if(e.index=n,"WEBVTT"!==d.headers?.fileType&&(e.timeLine=e.timeLine.replace(",","."),e.startTime=e.startTime.replace(",","."),e.endTime=e.endTime.replace(",",".")),t.includes("timeStamp")){let n=e.startTime.replace(/(.*)/,"1970-01-01T$1Z");e.timeStamp=t.includes("ms")?Date.parse(n):Date.parse(n)/1e3}return t.includes("singleLine")?e.text=e.text.replace(/[(\r\n)\r\n]/," "):t.includes("multiLine")&&(e.text=e.text.split(/[(\r\n)\r\n]/)),e})),d}stringify(e={headers:{},CSS:{},body:[]},t=["milliseconds","\n"]){const n=t.includes("\n")?"\n":t.includes("\r")?"\r":t.includes("\r\n")?"\r\n":"\n";return[e.headers=e.headers?.Xoptions?[e.headers?.fileType??"WEBVTT",e.headers?.Xoptions??null].join(n):e.headers?.fileType??"WEBVTT",e.CSS=e.CSS?.Style?[e.CSS.Style,e.CSS.Boxes].join(n):null,e.body=e.body.map((e=>(Array.isArray(e.text)&&(e.text=e.text.join(n)),e=`${e.timeLine} ${e?.options??""}${n}${e.text}`))).join(n+n)].join(n+n)}}(e,t)}
